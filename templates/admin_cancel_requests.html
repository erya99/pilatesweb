{% extends 'base.html' %}
{% block title %}İptal Talepleri · Pilates Studio{% endblock %}
{% block content %}

<div class="rounded-2xl bg-white/70 backdrop-blur-xl p-6 ring-1 ring-white/60 shadow">
  <div class="flex items-center justify-between mb-4">
    <h2 class="font-semibold text-lg">İptal Talepleri</h2>
    <a href="{{ url_for('admin_dashboard') }}" class="text-sm underline">← Panele Dön</a>
  </div>

  <div class="space-y-3">
    {% for r in pending %}
      <div class="rounded-xl bg-white/90 ring-1 ring-white/60 shadow-inner p-4 flex items-start justify-between gap-4">
        <div>
          <div class="font-medium">{{ r.user_name }}</div>
          <div class="text-sm text-stone-600">
            {{ r.session.date.strftime('%d.%m.%Y') }} · {{ r.session.time.strftime('%H:%M') }}
          </div>
          <div class="mt-2 text-[13px]">
            <span class="text-stone-500">Sebep:</span> {{ r.cancel_reason or '—' }}
          </div>
        </div>
        <div class="flex items-center gap-2">
          <form method="post" action="{{ url_for('admin_cancel_approve', rid=r.id) }}">
            <button class="px-3 py-2 rounded-xl bg-emerald-200 text-emerald-900 shadow">Onayla</button>
          </form>
          <form method="post" action="{{ url_for('admin_cancel_reject', rid=r.id) }}">
            <button class="px-3 py-2 rounded-xl bg-rose-200 text-rose-900 shadow">Reddet</button>
          </form>
        </div>
      </div>
    {% else %}
      <div class="text-sm text-stone-500">Bekleyen iptal talebi yok.</div>
    {% endfor %}
  </div>
</div>

{% endblock %}
